(()=>{"use strict";function e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var t,n,i,o=window.MiniVideoMe.config,r={width:Number(o.camera.width),height:Number(o.camera.height),frameRate:Number(o.camera.frameRate),flipHorizontal:Boolean(o.flipHorizontal),rounded:Boolean(o.rounded),scale:Number(null!==(t=o.zoom)&&void 0!==t?t:1),horizontal:Number(null!==(n=o.anchor.x)&&void 0!==n?n:0),vertical:Number(null!==(i=o.anchor.y)&&void 0!==i?i:0)};function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.videoWrapper=document.getElementById("wrapper"),this.videoElement=document.getElementById("video"),this.isFlipped=r.flipHorizontal,this.isRounded=r.rounded,this.position={x:r.horizontal,y:r.vertical,z:r.scale},this.render()}var t,n;return t=e,(n=[{key:"flipHorizontal",value:function(){this.isFlipped=!this.isFlipped,this.render()}},{key:"adjustOffset",value:function(e){switch(e){case"up":this.position.y-=1;break;case"down":this.position.y+=1;break;case"left":this.position.x-=1;break;case"right":this.position.x+=1}this.render()}},{key:"zoom",value:function(e){"in"===e?this.position.z+=.1:this.position.z-=.1,this.render()}},{key:"round",value:function(){this.isRounded=!this.isRounded,this.render()}},{key:"render",value:function(){var e=[],t=[];e.push("translate(".concat(this.position.x,"%, ").concat(this.position.y,"%)")),e.push("scale(".concat(this.position.z,")")),this.isFlipped&&(t.push("flip"),e.push("rotateY(180deg)")),this.videoElement.style.transform=e.join(" "),this.videoElement.className=t.join(" "),this.videoWrapper.className=this.isRounded?"rounded":""}}])&&s(t.prototype,n),e}();function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function c(t){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?a(Object(i),!0).forEach((function(n){e(t,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):a(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var d,l=window.MiniVideoMe,f=new u;navigator.mediaDevices.enumerateDevices().then((function(e){d=e.filter((function(e){return"videoinput"===e.kind})),navigator.mediaDevices.getUserMedia({video:c(c({},r),{},{deviceId:d[0].deviceId})||!0}).then((function(e){f.videoElement.srcObject=e}));var t=d.map((function(e){return{id:e.deviceId,label:e.label}}));l.sendVideoInputDevices(t)}));var p,h={ArrowLeft:function(){return f.adjustOffset("left")},ArrowRight:function(){return f.adjustOffset("right")},ArrowUp:function(){return f.adjustOffset("up")},ArrowDown:function(){return f.adjustOffset("down")},"=":function(){return f.zoom("in")},"-":function(){return f.zoom("out")},"/":function(){return f.flipHorizontal()},o:function(){return f.round()}};window.addEventListener("keydown",(function(e){h[e.key]&&h[e.key]()})),l.on("videoInputChange",(function(e){navigator.mediaDevices.getUserMedia({video:c(c({},r),{},{deviceId:e})||!0}).then((function(e){return f.videoElement.srcObject=e}))})),window.ondblclick=function(){l.sendDoubleClick()},window.addEventListener("mousemove",(function(){document.body.style.cursor="default",clearTimeout(p),p=setTimeout((function(){document.body.style.cursor="none"}),1e3)}))})();
//# sourceMappingURL=index.js.map